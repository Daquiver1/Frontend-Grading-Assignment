"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[881],{84762:function(e,t,n){n.d(t,{V:function(){return es},Z:function(){return en}});var r,s,a=n(90038),i=n(3125),o=n(36112),l=n(19841),c=n(72201),u=n(26430),d=n(84913),f=n(44043),h=n(82187),m=n(69262),p=n(70737),v=n(97296),g=n(70079),x=n(94968),y=n(70671),b=n(32004),j=n(21389),k=n(29446),w=n(91559),O=n(3554),M=n(21120),P=n(37097),N=n(5063),C=n(66027),Z=n(19954),S=n(33322),T=n(58272),D=n(83380),E=n(5974),I=n(28818),F=n(25349),L=n(99893),_=n(10721),R=n.n(_),W=n(60077),B=n(55509),A=n(2118),z=n(35250);function U(e){var t=e.text,n=(0,A.Z)(),r=(0,g.useState)(!0),s=r[0],a=r[1],i=(0,g.useState)(0),o=i[0],l=i[1],c=(0,g.useMemo)(function(){return new H().humanTypingDelaysQuertyDistance(t)},[t]);return(0,g.useEffect)(function(){t&&s&&(a(!0),c.forEach(function(e,t){setTimeout(function(){n()&&(l(t),t===c.length-1&&a(!1))},e)}))},[c,n,s,t]),(0,z.jsx)(z.Fragment,{children:t.substring(0,o+1)})}var H=function(){function e(){(0,W.Z)(this,e)}return(0,B.Z)(e,[{key:"qwertyDistance",value:function(e,t){var n,r,s={q:[0,0],w:[1,0],e:[2,0],r:[3,0],t:[4,0],y:[5,0],u:[6,0],i:[7,0],o:[8,0],p:[9,0],a:[0,1],s:[1,1],d:[2,1],f:[3,1],g:[4,1],h:[5,1],j:[6,1],k:[7,1],l:[8,1],z:[0,2],x:[1,2],c:[2,2],v:[3,2],b:[4,2],n:[5,2],m:[6,2]},a=null!==(n=s[e.toLowerCase()])&&void 0!==n?n:[0,0],o=(0,i.Z)(a,2),l=o[0],c=o[1],u=null!==(r=s[t.toLowerCase()])&&void 0!==r?r:[0,0],d=(0,i.Z)(u,2);return Math.abs(l-d[0])+Math.abs(c-d[1])}},{key:"humanTypingDelaysQuertyDistance",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,r=0,s=[],a=0;a<e.length;++a){var i=void 0;if(a>0){var o=this.qwertyDistance(e[a-1],e[a]);i=0===o?this.getRandomInt(t,Math.floor(n/2)):1===o?this.getRandomInt(t,Math.floor(2*n/3)):this.getRandomInt(t,n)}else i=this.getRandomInt(t,n);s.push(i+r),r+=i}return s}},{key:"getRandomInt",value:function(e,t){return Math.floor(Math.random()*(t-e+1))+e}}]),e}();n(90387);var V=n(26272),G=n(50687),q=n(77986);function Y(e){var t=e.conversation,n=(0,q.iF)(),r=(0,g.useState)(!1),s=r[0],a=r[1];return((0,g.useEffect)(function(){return(0,T.LW)(D.n,{deleteChat:function(){a(!0)}})},[]),(0,S.E)().isUserUnauthenticated)?null:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(G.n,{clientThreadId:t.id,children:(0,z.jsxs)("button",{className:"absolute bottom-0 right-0 top-0 flex w-9 items-center justify-center rounded-lg text-token-text-tertiary transition hover:text-token-text-secondary radix-state-open:text-token-text-secondary",children:[(0,z.jsx)("div",{className:"pointer-events-none absolute bottom-0 right-0 top-0 w-14 rounded-lg bg-gradient-to-l from-token-surface-primary from-60% to-transparent"}),(0,z.jsx)(N.Yr,{className:"icon-md relative"})]})}),s&&(0,z.jsx)(es,{title:t.title,handleDelete:function(){C.ZP.patchConversation(t.id,{is_visible:!1}).then(function(){n()}),R().push("/",void 0,{shallow:!0})},onClose:function(){a(!1)}})]})}function $(e){var t=e.conversation,n=e.onClose,r=(0,g.useState)(t.title),s=r[0],a=r[1],i=(0,q.iF)();function o(){s!==t.title&&(Z.tQ.setTitle(t.id,s,Z._L.User),F.A.logEvent(L.M.renameThread,{threadId:t.id,content:s}),C.ZP.patchConversation(t.id,{title:s}).then(function(){i()}))}return(0,z.jsx)("input",{type:"text",value:s,onChange:function(e){a(e.target.value)},onKeyDown:function(e){switch(e.key){case"Escape":n();break;case"Enter":o(),n()}},onBlur:function(){o(),n()},autoFocus:!0,className:"w-full border border-token-border-light bg-transparent p-0 text-sm"})}function Q(e){var t,n,r,s,a,i,o,c,u,d,f,h=e.conversation,m=e.isActive,p=e.elementRef,v=(0,g.useState)(!1),x=v[0],y=v[1];(0,g.useEffect)(function(){return(0,T.LW)(D.n,{editTitle:function(){m&&y(!0)}})},[m]);var b=(t=h.id,n=h.title,s=(r=(0,Z.XL)(t)).title,a=r.titleSource,o=(i=(0,g.useState)(!1))[0],c=i[1],u=null!=s?s:n,d=(0,g.useRef)(u),(0,g.useEffect)(function(){return m&&a===Z._L.Generated&&u!==d.current&&c(!0),function(){d.current=u}},[m,u,a]),{isTypingEffect:o,resolvedTitle:u}),j=b.resolvedTitle,k=b.isTypingEffect,w=(0,E.w$)(),O=(0,P.kg)(null!==(f=h.conversation_template_id)&&void 0!==f?f:void 0).data;return(0,z.jsxs)("div",{className:"group relative active:opacity-90",children:[(0,z.jsx)("a",{href:(0,I.ZV)(h.id,O),onClick:function(e){if(e.preventDefault(),!m){var t;t=h.id,V.hx.abortAllRequests(),F.A.logEvent(L.M.loadThread,{threadId:t}),R().push((0,I.ZV)(t,O),void 0,{shallow:!0})}},onDoubleClick:function(){y(!0)},ref:p,className:(0,l.default)("flex items-center gap-2 rounded-lg p-2",m?"bg-token-surface-primary":"hover:bg-token-surface-primary"),children:(0,z.jsxs)("div",{className:"relative grow overflow-hidden whitespace-nowrap",children:[k&&m&&w?(0,z.jsx)(U,{text:null!=j?j:""}):j,(0,z.jsx)("div",{className:(0,l.default)("absolute bottom-0 right-0 top-0 w-8 bg-gradient-to-l to-transparent",m?"from-token-surface-primary":"from-token-surface-primary group-hover:from-token-surface-primary dark:from-black")})]})}),x?(0,z.jsx)("div",{className:"absolute bottom-0 left-[7px] right-2 top-0 flex items-center bg-token-surface-tertiary",children:(0,z.jsx)($,{conversation:h,onClose:function(){y(!1)}})}):m?(0,z.jsx)(Y,{conversation:h}):null]})}var K=n(63866);function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ee=(0,x.vU)({historyBucketToday:{id:"history.bucket.today",defaultMessage:"Today"},historyBucketYesterday:{id:"history.bucket.yesterday",defaultMessage:"Yesterday"},historyBucketLastSeven:{id:"history.bucket.lastSeven",defaultMessage:"Previous 7 Days"},historyBucketLastThirty:{id:"history.bucket.lastThirty",defaultMessage:"Previous 30 Days"},unableToLoadHistory:{id:"history.unableToLoad",defaultMessage:"Unable to load history"},retryButton:{id:"history.retryButton",defaultMessage:"Retry"},showMoreButton:{id:"history.showMoreButton",defaultMessage:"Show more"},deleteModalTitle:{id:"history.deleteModalTitle",defaultMessage:"Delete chat?"},deleteModalBody:{id:"history.deleteModalBody",defaultMessage:"This will delete {title}."},deleteModalConfirm:{id:"history.deleteModalConfirm",defaultMessage:"Delete"},deleteModalCancel:{id:"history.deleteModalCancel",defaultMessage:"Cancel"}}),et={initial:function(e){return e.isNew?{opacity:0,height:0,overflow:"hidden"}:{}},animate:function(){return{opacity:1,height:"auto"}},exit:function(){return{opacity:0,height:0}}},en=g.memo(function(e){var t,n,r=e.activeId,s=(0,y.Z)(),a=(0,g.useState)(!1),o=a[0],x=a[1],j=(0,g.useState)(0),O=j[0],M=j[1],P=(0,k.Z)(),N=(0,q.MO)(),C=N.conversations,Z=N.hasNextPage,S=N.fetchNextPage,T=N.isLoading,D=N.isFetchingNextPage,E=N.isError,I=(0,g.useRef)(null),F=(0,g.useCallback)(function(e){var t;T||null==e||(null===(t=I.current)||void 0===t||t.disconnect(),I.current=new IntersectionObserver(function(e){e[0].isIntersecting&&Z&&S()}),I.current.observe(e))},[T,Z,S]);(0,g.useEffect)(function(){return function(){var e;null===(e=I.current)||void 0===e||e.disconnect()}},[]);var L=(0,q.iF)(),_=(t=(0,g.useRef)(),n=(0,g.useRef)(),((0,g.useEffect)(function(){t.current=n.current,n.current=C},[C]),C===n.current)?t.current:n.current);(0,g.useEffect)(function(){P(function(){M(O+1)},(0,u.Z)((0,d.Z)(),Date.now())+1e3)},[O,P]);var R=0===C.length,W=(0,g.useMemo)(function(){return C.reduce(function(e,t){var n,r,a=new Date(null!==(n=null!==(r=t.update_time)&&void 0!==r?r:t.create_time)&&void 0!==n?n:0),i=(0,c.Z)(new Date,a);if(0===i)e.recent.today.items.push(t);else if(i<=1)e.recent.yesterday.items.push(t);else if(i<=7)e.recent.lastSeven.items.push(t);else if(i<=30)e.recent.lastThirty.items.push(t);else if((0,m.Z)(a)){var o=(0,h.Z)(a),l=(0,f.Z)(a),u="".concat(o,"-").concat(l);e.dynamicMonths[u]?e.dynamicMonths[u].items.push(t):e.dynamicMonths[u]={label:s.formatDate(a,{month:"long"}),items:[t]}}else{var d=(0,h.Z)(a),p="".concat(d,"-");e.dynamicYears[p]?e.dynamicYears[p].items.push(t):e.dynamicYears[p]={label:s.formatDate(a,{year:"numeric"}),items:[t]}}return e},{recent:{today:{label:(0,z.jsx)(b.Z,J({},ee.historyBucketToday)),items:[]},yesterday:{label:(0,z.jsx)(b.Z,J({},ee.historyBucketYesterday)),items:[]},lastSeven:{label:(0,z.jsx)(b.Z,J({},ee.historyBucketLastSeven)),items:[]},lastThirty:{label:(0,z.jsx)(b.Z,J({},ee.historyBucketLastThirty)),items:[]}},dynamicMonths:{},dynamicYears:{}})},[O,C]);return(0,z.jsxs)(er,{$centered:T||E&&R,children:[R&&T&&(0,z.jsx)(K.Z,{className:"m-auto"}),R&&E&&(0,z.jsxs)("div",{className:"p-3 text-center italic text-gray-500",children:[(0,z.jsx)(b.Z,J({},ee.unableToLoadHistory)),!o&&(0,z.jsx)("div",{className:"mt-1",children:(0,z.jsx)(w.z,{as:"button",color:"dark",size:"small",className:"m-auto mt-2",onClick:function(){x(!0),L()},children:(0,z.jsx)(b.Z,J({},ee.retryButton))})})]}),!T&&(0,z.jsx)("div",{children:(0,z.jsx)(p.M,{initial:!1,children:[W.recent,W.dynamicMonths,W.dynamicYears].flatMap(function(e,t){return(0,z.jsx)("span",{children:Object.entries(e).map(function(e){var t=(0,i.Z)(e,2),n=t[0],s=t[1],a=s.items,o=s.label;if("today"!==n&&!a.length)return null;var c=!!a.find(function(e){var t;return C.length>0&&e.id===(null===(t=C[0])||void 0===t?void 0:t.id)});return(0,z.jsxs)(v.E.div,{className:"relative mt-5",layoutId:"bucket-".concat(n),layout:"position",initial:{height:0,opacity:1,position:"relative"},animate:{height:"auto",opacity:1,transition:{duration:.2,ease:"easeIn"}},children:[a.length>0&&(0,z.jsx)(v.E.div,{layoutId:"bucketTitle-".concat(n),layout:"position",children:(0,z.jsx)(ea,{children:o})}),(0,z.jsx)("ol",{children:a.map(function(e,t){var n,s=r===e.id,a=null==_?void 0:_.find(function(t){return t.id===e.id}),i=Z&&(null===(n=C[C.length-5-1])||void 0===n?void 0:n.id)===e.id?F:void 0;return(0,z.jsx)(v.E.li,{className:(0,l.default)("relative",c&&0===t?"z-[15]":""),layoutId:"".concat(e.id),layout:"position",custom:{isNew:!a},variants:et,initial:"initial",animate:"animate",exit:"exit",children:(0,z.jsx)(Q,{conversation:e,isActive:s,elementRef:i})},"history-item-".concat(e.id))})})]},n)})},"category-".concat(t))})})}),D&&(0,z.jsx)("div",{className:"m-4 mb-5 flex justify-center",children:(0,z.jsx)(K.Z,{})})]})}),er=j.Z.div(r||(r=(0,a.Z)(["flex flex-col gap-2 pb-2 dark:text-gray-100 text-gray-800 text-sm\n",""])),function(e){return e.$centered&&"h-full justify-center items-center"});function es(e){var t=e.title,n=e.handleDelete,r=e.onClose,s=(0,y.Z)();return(0,z.jsx)(M.Z,{isOpen:!0,onClose:r,type:"success",title:s.formatMessage(ee.deleteModalTitle),primaryButton:(0,z.jsx)(O.ZP.Button,{title:s.formatMessage(ee.deleteModalConfirm),color:"danger",onClick:function(){n(),r()}}),secondaryButton:(0,z.jsx)(O.ZP.Button,{title:s.formatMessage(ee.deleteModalCancel),color:"neutral",onClick:r}),children:(0,z.jsx)(b.Z,J(J({},ee.deleteModalBody),{},{values:{title:(0,z.jsx)("strong",{children:t})}}))})}var ea=j.Z.h3(s||(s=(0,a.Z)(["h-9 pb-2 pt-3 px-2 text-xs font-medium text-ellipsis overflow-hidden break-all bg-white dark:bg-black text-gizmo-gray-600"])))},35212:function(e,t,n){n.d(t,{Z:function(){return y}});var r=n(36112),s=n(90166),a=n(32148),i=n(19841),o=n(97296),l=n(70079),c=n(32004),u=n(94968),d=n(18008),f=n(5974),h=n(8024),m=n(88140),p=n(35250);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function x(e){var t=e.isDesktopNavCollapsed,n=e.onHoverChange;return(0,p.jsx)(o.E.div,{transition:{duration:.165},animate:{x:t?"0":"260px"},style:{rotate:t?180:0,y:"-50%"},className:(0,i.default)("fixed left-0 top-1/2 z-40"),children:(0,p.jsx)("button",{onClick:d.vm.toggleDesktopNavCollapsed,onMouseEnter:function(){return n(!0)},onMouseLeave:function(){return n(!1)},children:(0,p.jsxs)(s.u,{side:"right",label:t?(0,p.jsx)(c.Z,g({},b.openSidebar)):(0,p.jsx)(c.Z,g({},b.closeSidebar)),sideOffset:4,children:[(0,p.jsx)(o.E.div,{className:"flex h-[72px] w-8 items-center justify-center",variants:{rest:{opacity:.25},hover:{opacity:1}},initial:!1,whileHover:["hover","arrow"],animate:["rest",t?"arrow":"line"],children:(0,p.jsxs)(o.E.div,{className:"flex h-6 w-6 flex-col items-center",children:[(0,p.jsx)(o.E.div,{className:"h-3 w-1 rounded-full bg-token-text-primary",variants:{line:{rotate:"0deg",y:".15rem"},arrow:{rotate:"15deg",y:".15rem"}}}),(0,p.jsx)(o.E.div,{className:"h-3 w-1 rounded-full bg-token-text-primary",variants:{line:{rotate:"0deg",y:"-.15rem"},arrow:{rotate:"-15deg",y:"-.15rem"}}})]})}),(0,p.jsx)(a.T,{children:t?(0,p.jsx)(c.Z,g({},b.openSidebar)):(0,p.jsx)(c.Z,g({},b.closeSidebar))})]})})})}function y(e){var t=e.children,n=e.hideNavigation,r=void 0!==n&&n,s=e.mobileHeaderContent,a=e.mobileHeaderRightContent,o=e.sidebar,c=(0,f.w$)(),u=(0,d.tN)(function(e){return e.isDesktopNavCollapsed}),v=(0,l.useState)(!1),g=v[0],b=v[1],j=[],k=null;l.Children.forEach(t,function(e){l.isValidElement(e)&&(e.type===y.Sidebars?k=e:j.push(e))});var w=c&&!r&&null!=o;return(0,p.jsxs)("div",{className:"relative z-0 flex h-full w-full overflow-hidden",children:[w?(0,p.jsx)(h.Z,{children:(0,p.jsx)(m.l6,{children:(0,p.jsx)("div",{className:(0,i.default)("flex h-full min-h-0 flex-col transition-opacity",g&&!u||u?"opacity-50":"opacity-100"),children:o})})}):null,(0,p.jsxs)("div",{className:"relative flex h-full max-w-full flex-1 flex-col overflow-hidden",children:[!c&&!r&&(0,p.jsx)(h.Z,{children:(0,p.jsx)(m.Vs,{onClickOpenSidebar:function(){return d.vm.toggleActiveSidebar("mobile-nav")},sidebar:o,rightContent:a,children:s})}),(0,p.jsxs)("main",{className:"relative h-full w-full flex-1 overflow-auto transition-width",children:[(0,p.jsx)(h.Z,{children:w&&(0,p.jsx)(x,{isDesktopNavCollapsed:u,onHoverChange:b})}),j]})]}),k]})}y.Sidebars=function(e){var t=e.children;return(0,p.jsx)(p.Fragment,{children:t})};var b=(0,u.vU)({closeSidebar:{id:"Stage.closeSidebar",defaultMessage:"Close sidebar"},openSidebar:{id:"Stage.openSidebar",defaultMessage:"Open sidebar"}})},88140:function(e,t,n){n.d(t,{MP:function(){return j},Vs:function(){return O},js:function(){return k},l6:function(){return M}});var r=n(36112),s=n(80459),a=n(5063),i=n(98359),o=n(72555),l=n(19841),c=n(97296),u=n(10721),d=n(70079),f=n(32004),h=n(94968),m=n(18008);n(5974),n(90166);var p=n(83071),v=n(35250),g=["onClick","className"],x=["onClick"];function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function j(e){var t=e.onClick,n=e.className,r=(0,s.Z)(e,g);return(0,v.jsx)(p.zV,b({onClick:t,className:(0,l.default)(n,"flex-grow overflow-hidden")},r))}function k(e){var t=e.onClick,n=(0,s.Z)(e,x);return(0,v.jsx)("button",b({type:"button",className:"px-3",onClick:t},n))}var w=function(e){var t=e.onClose,n=e.sidebarOpen,r=e.children;return(0,v.jsx)(i.u.Root,{show:n,as:d.Fragment,children:(0,v.jsxs)(o.V,{as:"div",className:"dark relative",onClose:t,children:[(0,v.jsx)(i.u.Child,{as:d.Fragment,enter:"transition-opacity ease-linear duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity ease-linear duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,v.jsx)("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/25"})}),(0,v.jsxs)("div",{className:"fixed inset-0 flex",children:[(0,v.jsx)(i.u.Child,{as:d.Fragment,enter:"transition ease-in-out duration-300 transform",enterFrom:"-translate-x-full",enterTo:"translate-x-0",leave:"transition ease-in-out duration-300 transform",leaveFrom:"translate-x-0",leaveTo:"-translate-x-full",children:(0,v.jsxs)(o.V.Panel,{className:"relative flex w-full max-w-xs flex-1 flex-col bg-black",children:[(0,v.jsx)(i.u.Child,{as:d.Fragment,enter:"ease-in-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in-out duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,v.jsx)("div",{className:"absolute right-0 top-0 -mr-12 pt-3.5",children:(0,v.jsxs)("button",{type:"button",className:"ml-1 flex h-10 w-10 items-center justify-center text-white focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:t,children:[(0,v.jsx)("span",{className:"sr-only",children:(0,v.jsx)(f.Z,b({},P.closeSidebar))}),(0,v.jsx)(a.v7,{className:"icon-md"})]})})}),r]})}),(0,v.jsx)("div",{className:"w-14 flex-shrink-0"})]})]})})},O=function(e){var t=e.onClickOpenSidebar,n=e.children,r=e.sidebar,s=e.rightContent,i=(0,m.tN)(function(e){return e.activeSidebar}),o=(0,u.useRouter)().asPath;return(0,d.useEffect)(function(){"mobile-nav"===i&&m.vm.setActiveSidebar(!1)},[o]),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"text-token-primary sticky top-0 z-10 flex min-h-[40px] items-center justify-center border-b border-token-border-medium bg-token-surface-primary pl-1 dark:bg-token-surface-secondary md:hidden",children:[(0,v.jsxs)("button",{type:"button",className:"absolute left-0 -ml-0.5 -mt-0.5 inline-flex h-10 w-10 items-center justify-center rounded-md hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white active:opacity-50 dark:hover:text-white",onClick:t,children:[(0,v.jsx)("span",{className:"sr-only",children:(0,v.jsx)(f.Z,b({},P.openSidebar))}),(0,v.jsx)(a.$0,{className:"icon-md"})]}),n,null!=s&&(0,v.jsx)("div",{className:"absolute bottom-0 right-0 top-0 flex items-center",children:s})]}),(0,v.jsx)(w,{onClose:function(){m.vm.setActiveSidebar(!1)},sidebarOpen:"mobile-nav"===i,children:r})]})};function M(e){var t=e.children,n=(0,d.useRef)(null),r=(0,m.tN)(function(e){return e.isDesktopNavCollapsed});return(0,v.jsx)(c.E.div,{className:"dark flex-shrink-0 overflow-x-hidden bg-black",ref:n,initial:!1,animate:{width:r?0:"260px",transition:{duration:.165,ease:"easeOut"}},onAnimationStart:function(){n.current&&(n.current.style.visibility="visible")},onAnimationComplete:function(){n.current&&r&&(n.current.style.visibility="hidden")},children:(0,v.jsx)("div",{className:"h-full w-[260px]",children:(0,v.jsx)("div",{className:"flex h-full min-h-0 flex-col",children:t})})})}var P=(0,h.vU)({closeSidebar:{id:"navigation.closeSidebar",defaultMessage:"Close sidebar"},openSidebar:{id:"navigation.openSidebar",defaultMessage:"Open sidebar"}})},73659:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(18008),s=n(91530),a=n.n(s),i=n(70671),o=n(94968),l=n(21120),c=n(54031),u=n(35250);function d(e){var t=e.workspace,n=(0,i.Z)(),s=(0,r.EV)(r.B.InviteUsersToWorkspace);return(0,u.jsx)(l.Z,{size:"custom",className:"max-w-lg text-sm",isOpen:s,onClose:a(),type:"success",title:(null==t?void 0:t.name)!=null?n.formatMessage(f.inviteMemberModalTitle,{workspaceName:t.name}):n.formatMessage(f.inviteMemberModalTitleUntitledWorkspace),description:n.formatMessage(f.inviteMemberModalDescription),children:(0,u.jsx)(c.Z,{workspace:t,canResendInviteEmails:!0,onCancel:function(){return r.vm.closeModal(r.B.InviteUsersToWorkspace)},onSuccess:function(){return r.vm.closeModal(r.B.InviteUsersToWorkspace)},cancelButtonText:n.formatMessage(f.inviteMemberInviteCancelButton)})})}var f=(0,o.vU)({inviteMemberInviteCancelButton:{id:"adminPage.inviteMemberInviteCancelButton",defaultMessage:"Cancel"},inviteMemberModalTitle:{id:"adminPage.inviteMemberModalTitle",defaultMessage:"Invite members to the {workspaceName} workspace"},inviteMemberModalTitleUntitledWorkspace:{id:"adminPage.inviteMemberModalTitleUntitledWorkspace",defaultMessage:"Invite members to this workspace"},inviteMemberModalDescription:{id:"adminPage.inviteMemberModalDescription",defaultMessage:"This workspace is private, only select members and roles can use this workspace. This workspace is opted out of training."},fileTooLargeWarning:{id:"adminPage",defaultMessage:"File is too large. Please upload a CSV file smaller than {maxSize}."}})},83562:function(e,t,n){n.d(t,{ZP:function(){return eV}});var r,s,a=n(90038),i=n(36112),o=n(73700),l=n(33322),c=n(32148),u=n(19841),d=n(70079),f=n(1454),h=n(70671),m=n(32004),p=n(94968),v=n(91559),g=n(7144),x=n(18008),y=n(15136),b=n(26822),j=n(20225),k=n(73040),w=n.n(k),O=n(21389),M=n(90166),P=n(38766),N=n(17080),C=n(14972),Z=n(1905),S=n(66044),T=n(50134),D=n(4399),E=n.n(D),I=n(73659),F=n(66027),L=n(1890),_=n(73582),R=n(25349),W=n(99893),B=n(10721),A=n(62442),z=n(63866),U=n(4748),H=n(97296),V=n(61236),G=n(14765),q=n(35250);function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Q(e){var t=e.showFreeTrialLoadingPayment,n=e.handleGetPaymentLink,r=(0,h.Z)(),s=(0,V.a)({queryKey:["claimedReferralInvite"],queryFn:function(){return F.ZP.getClaimedReferralInvite()},refetchOnMount:!1,refetchOnWindowFocus:!1,refetchInterval:!1,refetchOnReconnect:!1}),a=s.data,i=s.isLoading,o=s.isSuccess,l=null==a?void 0:a.invite_code,c=(0,d.useState)(!1),p=c[0],v=c[1];if((0,d.useEffect)(function(){l&&!p&&o&&(v(!0),G.m9.logEvent("chatgpt_referral_show_claimed_sidebar_menu_promo"),R.A.logEvent(W.M.chatgptReferralShowClaimedSidebartMenuPromo))},[l,v,p,o]),!l||i||!o)return null;var g=l.invite_metadata.invite_data,x=null!=g&&g.referral_trial_duration_months?(null==g?void 0:g.referral_trial_duration_months)>1?r.formatMessage(X.monthsOfBenefit,{referralTrialDurationMonths:null==g?void 0:g.referral_trial_duration_months}):r.formatMessage(X.daysOfBenefit,{referralTrialDurationDays:null==g?void 0:g.referral_trial_duration_days}):null;return(0,q.jsx)(H.E.div,{className:(0,u.default)("relative",{"cursor-progress opacity-50":t}),layout:"position",initial:{y:-10,opacity:1},animate:{y:0,opacity:1,transition:{duration:.1,ease:"easeIn"}},children:(0,q.jsxs)(K,{className:(0,u.default)(t&&"opacity-75"),onClick:function(){t||((0,A.Vk)(!0),n())},children:[(0,q.jsxs)("div",{className:"flex w-full flex-row items-center justify-start gap-3 ",children:[(0,q.jsx)(f.E33,{className:"icon-sm shrink-0"}),(0,q.jsx)(m.Z,$($({},X.freeTrialCta),{},{values:{duration:x}}))]}),!t&&(0,q.jsx)(f.q5L,{onClick:function(e){e.stopPropagation(),(0,A.zG)(!0),(0,A.H1)(!0)},className:"icon-md shrink-0 rounded-full p-0.5 text-gray-400 opacity-50  transition-colors duration-200 hover:bg-[#0077FF] hover:text-red-500  group-hover:opacity-100"}),(0,q.jsx)("span",{className:"absolute top-11 h-0 w-0 border-l-8 border-r-8 border-t-8 border-l-transparent border-r-transparent border-t-[#0077FF] transition-colors duration-200 group-hover:border-t-[#0077FF]"})]})})}var K=O.Z.a(r||(r=(0,a.Z)(["group relative mb-1 rounded-md hover:[#0077FF] bg-[#0077FF] flex px-3 min-h-[44px] py-1 items-center gap-3 transition-colors duration-200 dark:text-white cursor-pointer text-sm"]))),X=(0,p.vU)({freeTrialCta:{id:"PaymentMenuItems.freeTrialCta",defaultMessage:"Get {duration}!"},monthsOfBenefit:{id:"FreeTrialMenuItem.monthsOfBenefit",defaultMessage:"{referralTrialDurationMonths, plural, one {one month free} other {# months free}}"},daysOfBenefit:{id:"FreeTrialMenuItem.daysOfBenefit",defaultMessage:"{referralTrialDurationDays, plural, one {one day free} other {# days free}}"}}),J=n(83071),ee=n(5063),et=n(22364);function en(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function er(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?en(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):en(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function es(){var e,t,n,r,s,a,i,o,l=(0,B.useRouter)(),c=(0,h.Z)(),u=(0,g.hz)(),f=(0,g.t)(),p=null!==(t=null==f?void 0:f.hasPaidSubscription())&&void 0!==t&&t,v=null!==(n=null==f?void 0:f.hasClaimedFreeTrial())&&void 0!==n&&n,x=(e=(0,T.Z)(E().mark(function e(){var t;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(0,A.Vk)(!0),R.A.logEvent(W.M.clickAccountPaymentCheckout),e.prev=2,e.next=5,F.ZP.getCheckoutLink();case 5:t=e.sent,l.push(t.url),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),U.m.warning(c.formatMessage(el.paymentErrorWarning),{hasCloseButton:!0}),(0,A.Vk)(!1);case 13:return e.prev=13,e.finish(13);case 15:case"end":return e.stop()}},e,null,[[2,9,13,15]])})),function(){return e.apply(this,arguments)}),y=(0,A.tS)(function(e){return e.didCloseFreeTrial}),b=(0,A.tS)(function(e){return e.showFreeTrialLoadingPayment}),j=!y&&v,k=!p&&!(null!=u&&u.includes("disable_upgrade_ui")),w=null!==(r=null==f?void 0:f.wasPaidCustomer())&&void 0!==r&&r,O=null!==(s=null==f?void 0:f.isWorkspaceAccount())&&void 0!==s&&s,M=null!==(a=null==f?void 0:f.isPlus())&&void 0!==a&&a,P=!!f&&!O&&(!1===M||null!==(i=null==u?void 0:u.includes(L.L0.Teams))&&void 0!==i&&i),N=(0,et.C)(function(e){return{setShowReferralInviteModal:e.setShowReferralInviteModal}}).setShowReferralInviteModal,C=(0,d.useCallback)(function(){G.m9.logEvent("chatgpt_referral_invite_sidebar_clicked"),R.A.logEvent(W.M.chatgptReferralInviteSidebarClicked),N(!0,function(){R.A.logEvent(W.M.clickSidebarAccountPaymentMenuItem)})},[N]),Z=null!==(o=null==f?void 0:f.isTeam())&&void 0!==o&&o;return(0,q.jsxs)(q.Fragment,{children:[((null==u?void 0:u.includes(L.a3))||p)&&(0,q.jsx)(eo,{handleReferralInvite:C}),!p&&j&&(0,q.jsx)(Q,{showFreeTrialLoadingPayment:b,handleGetPaymentLink:x}),Z&&(0,q.jsx)(ei,{}),P&&(0,q.jsx)(J.Vq,{onClick:j?function(){b||((0,A.Vk)(!0),x())}:function(){R.A.logEvent(W.M.clickSidebarAccountPaymentMenuItem);var e=l.asPath.split("#");l.push("".concat(e[0],"#pricing"))},className:"rounded-lg px-2",children:(0,q.jsxs)("span",{className:"flex w-full flex-row flex-wrap-reverse justify-between",children:[(0,q.jsx)("div",{className:"flex items-center gap-2",children:(0,q.jsx)(ea,{wasPaidCustomer:w,showFreeTrialLoadingPayment:b,hasPlusSubscription:M})}),!(null!=u&&u.includes(L.a3))&&k&&!w&&(0,q.jsx)("span",{className:"rounded-md bg-yellow-200 px-2 py-0.5 text-xs font-medium uppercase text-gray-800",children:(0,q.jsx)(m.Z,er({},el.newLabel))})]})})]})}var ea=function(e){var t=e.wasPaidCustomer,n=e.showFreeTrialLoadingPayment,r=e.hasPlusSubscription;return n?(0,q.jsx)(z.Z,{className:"icon-sm shrink-0"}):(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)("span",{className:"flex h-7 w-7 items-center justify-center rounded-full border border-token-border-light bg-black",children:(0,q.jsx)(ee.k4,{className:"icon-sm shrink-0"})}),(0,q.jsx)("div",{className:"flex flex-col",children:t?(0,q.jsx)(m.Z,er({},el.renewPlus)):(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)("span",{className:"font-semibold",children:(0,q.jsx)(m.Z,er({},el.upgradePlan))}),(0,q.jsx)("span",{className:"text-xs text-token-text-secondary line-clamp-1",children:r?(0,q.jsx)(m.Z,er({},el.upgradeToTeamUpsell)):(0,q.jsx)(m.Z,er({},el.upgradeToPlusUpsell))})]})})]})},ei=function(){var e=(0,_.ec)(function(e){return e.currentWorkspace});return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(J.Vq,{onClick:function(){x.vm.openModal(x.B.InviteUsersToWorkspace)},className:"rounded-md",children:(0,q.jsx)("span",{className:"flex w-full flex-row flex-wrap-reverse justify-between",children:(0,q.jsxs)("span",{className:"flex items-center gap-2",children:[(0,q.jsx)(f.zy7,{className:"icon-sm shrink-0"}),(0,q.jsx)(m.Z,er({},el.inviteMembers))]})})}),null!=e?(0,q.jsx)(I.Z,{workspace:e}):null]})},eo=function(e){var t,n=e.handleReferralInvite,r=(0,g.hz)(),s=null!==(t=null==r?void 0:r.includes(L.a3))&&void 0!==t&&t,a=(0,V.a)({queryKey:["referralInvites"],queryFn:function(){return F.ZP.getEligibleReferralInvites()},enabled:s}),i=a.data,o=a.isSuccess,l=(null==i?void 0:i.invites_remaining)&&(null==i?void 0:i.invites_remaining)>0&&o,c=(0,d.useState)(!1),u=c[0],h=c[1];return((0,d.useEffect)(function(){l&&!u&&(h(!0),G.m9.logEvent("chatgpt_referral_show_sidebar_menu_item"),R.A.logEvent(W.M.chatgptReferralShowSidebarMenuItem))},[l,h,u]),l)?(0,q.jsx)(J.Vq,{onClick:n,className:"rounded-md",children:(0,q.jsxs)("span",{className:"flex w-full flex-row flex-wrap-reverse justify-between",children:[(0,q.jsxs)("span",{className:"flex items-center gap-2",children:[(0,q.jsx)(f.zy7,{className:"icon-sm shrink-0"}),(0,q.jsx)(m.Z,er({},el.inviteReferral))]}),(0,q.jsx)("span",{className:"rounded-md bg-yellow-200 px-2 py-0.5 text-xs font-medium uppercase text-gray-800",children:(0,q.jsx)(m.Z,er({},el.newLabel))})]})}):null},el=(0,p.vU)({upgradePlan:{id:"PaymentMenuItems.upgradePlan",defaultMessage:"Upgrade plan"},upgradeToTeamUpsell:{id:"PaymentMenuItems.upgradeToTeamUpsell",defaultMessage:"Collaborate on a Team plan"},upgradeToPlusUpsell:{id:"PaymentMenuItems.upgradeToPlusUpsell.0",defaultMessage:"Get GPT-4, DALL\xb7E, and more"},renewPlus:{id:"PaymentMenuItems.renewPlus",defaultMessage:"Renew Plus"},inviteReferral:{id:"PaymentMenuItems.inviteReferral",defaultMessage:"Refer a friend"},inviteMembers:{id:"PaymentMenuItems.inviteMembers.0",defaultMessage:"Invite members"},newLabel:{id:"PaymentMenuItems.newLabel",defaultMessage:"NEW"},paymentErrorWarning:{id:"PaymentMenuItems.paymentErrorWarning",defaultMessage:"The payments page encountered an error. Please try again. If the problem continues, please visit help.openai.com."}}),ec=n(6939),eu=n(82256),ed=n(73797),ef=n(5974),eh=n(40318),em=n(7813),ep=n(47428),ev=n(61888),eg=n(90387),ex=n(218),ey=n(41202),eb=n(36638),ej=n(28818);function ek(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ew(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ek(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ek(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eO(){var e=(0,g.t)(),t=(0,d.useCallback)(function(){R.A.logEvent(W.M.clickSidebarAccountPortalMenuItem),(0,eb.MG)()},[]);return(0,q.jsxs)(q.Fragment,{children:[(null==e?void 0:e.hasPaidSubscription())&&(0,q.jsxs)(J.ZP,{onClick:t,children:[(0,q.jsx)(ee.PQ,{className:"icon-md"}),(0,q.jsx)(m.Z,ew({},eM.myPlan))]}),(null==e?void 0:e.canInteractWithGizmos())&&(0,q.jsxs)(J.ZP,{href:(0,ej.L7)(),children:[(0,q.jsx)(ee.PN,{className:"icon-md"}),(0,q.jsx)(m.Z,ew({},eM.myGpts))]}),(0,q.jsxs)(J.ZP,{onClick:function(){return x.vm.openModal(x.B.UserContext)},children:[(0,q.jsx)(ee.SA,{className:"icon-md"}),(0,q.jsx)(m.Z,ew({},eM.chatPreferences))]})]})}var eM=(0,p.vU)({myPlan:{id:"popoverNavigation.myPlan",defaultMessage:"My plan"},chatPreferences:{id:"popoverNavigation.chatPreferences",defaultMessage:"Custom instructions"},myGpts:{id:"popoverNavigation.myGpts",defaultMessage:"My GPTs"}});function eP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eP(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eP(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eC(){return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(eZ,{href:"/admin",children:[(0,q.jsx)(ee.oq,{className:"icon-md"}),(0,q.jsx)(m.Z,eN({},eS.myWorkspaceSettings))]}),(0,q.jsxs)(eZ,{href:(0,ej.L7)(),children:[(0,q.jsx)(ee.PN,{className:"icon-md"}),(0,q.jsx)(m.Z,eN({},eS.myGpts))]}),(0,q.jsxs)(J.ZP,{onClick:function(){return x.vm.openModal(x.B.UserContext)},children:[(0,q.jsx)(ee.SA,{className:"icon-md"}),(0,q.jsx)(m.Z,eN({},eS.chatPreferences))]})]})}function eZ(e){var t=e.href,n=e.children;return(0,q.jsx)(em.v.Item,{children:function(e){var r=e.active;return(0,q.jsx)(w(),{href:t,children:(0,q.jsx)(J.ZB,{$as:"span",className:(0,u.default)(r?"bg-gray-100 dark:bg-gray-800":"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800"),children:n})})}})}var eS=(0,p.vU)({myWorkspaceSettings:{id:"workspacePopoverNavigation.myWorkspaceSettings",defaultMessage:"Manage workspace"},chatPreferences:{id:"workspacePopoverNavigation.chatPreferences",defaultMessage:"Custom instructions"},myGpts:{id:"workspacePopoverNavigation.myGpts",defaultMessage:"My GPTs"}});function eT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eT(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eT(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eE(e){var t=e.onClickSettings;return(0,q.jsxs)(em.v,{as:"div",className:"group relative",children:[(0,q.jsx)(eB,{}),(0,q.jsx)(ey.m,{children:(0,q.jsx)(em.v.Items,{className:"absolute bottom-full left-0 z-20 mb-1 w-full overflow-hidden rounded-lg border border-gray-100 bg-white pb-1.5 pt-1 outline-none dark:border-gray-800 dark:bg-gray-900",children:(0,q.jsx)(eW,{onClickSettings:t})})})]})}function eI(){var e=(0,g.hz)(),t=(0,h.Z)(),n=(0,_.aF)();return n?(0,q.jsxs)("div",{className:"flex items-center justify-between gap-2 px-3 pb-0 pt-2",children:[(0,q.jsx)("div",{className:"text-xs text-token-text-secondary",children:null==n?void 0:n.email}),(null==e?void 0:e.includes(L.L0.Teams))&&(0,q.jsx)(M.u,{label:t.formatMessage(ez.addWorkspaceTooltip),side:"right",children:(0,q.jsx)("button",{onClick:function(){return(0,eb.MG)()},children:(0,q.jsx)(f.OvN,{className:"icon-sm flex-shrink-0 text-token-text-primary"})})})]}):null}function eF(){var e=(0,_.ec)(function(e){return e.currentWorkspace});return null==e?(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)("div",{className:"w-full px-3 py-2",children:(0,q.jsx)(z.Z,{})}),(0,q.jsx)(J.R,{})]}):(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(eI,{}),(0,q.jsx)("div",{className:"flex h-11 w-full items-center justify-start gap-3 px-3 py-1 text-sm",children:(0,q.jsx)(e_,{workspace:e,isLoading:!1,currentWorkspaceId:e.id,showCheck:!1})}),(0,q.jsx)(J.R,{})]})}function eL(){var e=(0,_.ec)(function(e){return e.workspaces}),t=(0,_.ec)(function(e){return e.currentWorkspace}),n=(0,d.useState)(!1),r=n[0],s=n[1],a=(0,ev.compact)([e.find(function(e){return e.structure===eu.CZ.PERSONAL})].concat((0,ec.Z)(e.filter(function(e){return e.structure!==eu.CZ.PERSONAL}))));return a.sort(function(e,t){return e.structure===eu.CZ.PERSONAL?1:t.structure===eu.CZ.PERSONAL?-1:0}),(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(eI,{}),(0,q.jsx)("div",{className:"flex w-full flex-col",children:a.map(function(e){return(0,q.jsx)(J.ZP,{disabled:e.deactivated,onClick:function(){e.id!==(null==t?void 0:t.id)&&(s(!0),(0,g.nq)(e.id),(0,eh.M)())},children:(0,q.jsx)("div",{className:"flex w-full items-center justify-start gap-3 py-1",children:e.deactivated?(0,q.jsx)(eR,{workspace:e,isLoading:r}):(0,q.jsx)(e_,{workspace:e,isLoading:r,currentWorkspaceId:null==t?void 0:t.id})})},e.id)})}),(0,q.jsx)(J.R,{})]})}function e_(e){var t=e.workspace,n=e.isLoading,r=e.currentWorkspaceId,s=e.showCheck,a=(0,h.Z)();return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(eg.zf,{iconSize:"small",workspace:t,className:(0,u.default)({"flex-shrink-0":!0})}),(0,q.jsx)("div",{className:(0,u.default)({"flex-grow truncate":!0}),children:(0,ex.CV)(a,t)}),n&&(0,q.jsx)(z.Z,{}),!n&&(void 0===s||s)&&(0,q.jsx)("div",{className:(0,u.default)("m-1 flex h-4 w-4 flex-shrink-0 rounded-full border align-middle",{"bg-white":t.id===r}),children:t.id===r&&(0,q.jsx)(f.UgA,{className:"m-auto h-3 w-3 scale-x-75 stroke-black stroke-[4]"})})]})}function eR(e){var t=e.workspace,n=e.isLoading,r=(0,h.Z)();return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(M.u,{className:"flex w-full flex-1 items-center gap-3 opacity-30",label:r.formatMessage(ez.disabledWorkspaceTooltip),side:"right",children:[(0,q.jsx)(C._V,{className:"icon-sm flex-shrink-0"}),(0,q.jsx)("div",{className:"truncate opacity-30",children:(0,ex.CV)(r,t)})]}),n&&(0,q.jsx)(z.Z,{}),!n&&(0,q.jsxs)(ed.Z.Root,{children:[(0,q.jsx)(ep.xz,{className:"rounded text-center hover:bg-token-surface-secondary",children:(0,q.jsx)(f.K9M,{className:"icon-sm m-1"})}),(0,q.jsx)(ed.Z.Portal,{children:(0,q.jsx)(ed.Z.Content,{children:(0,q.jsx)(ed.Z.Item,{onClick:function(){x.vm.setLeaveWorkspaceData(t)},children:(0,q.jsx)(m.Z,{id:"navigation.leaveWorkspace",defaultMessage:"Leave workspace"})})})})]})]})}function eW(e){var t=e.onClickSettings,n=(0,_.WY)(),r=(0,_.ec)(_.F_.isBusinessWorkspace),s=(0,_.ec)(_.F_.hasMultipleWorkspaces),a=(0,ef.w$)();return(0,q.jsxs)("nav",{children:[s?(0,q.jsx)(eL,{}):r&&(0,q.jsx)(eF,{}),r?(0,q.jsx)(eC,{}):(0,q.jsx)(eO,{}),!a&&(0,q.jsxs)(J.ZP,{as:"a",href:"https://help.openai.com/en/collections/3742473-chatgpt",target:"_blank",onClick:function(){R.A.logEvent(W.M.clickFaqLink)},children:[(0,q.jsx)(ee.dJ,{className:"icon-md"}),(0,q.jsx)(m.Z,eD({},ez.helpAndFaq))]}),(0,q.jsxs)(J.ZP,{onClick:t,children:[(0,q.jsx)(ee.RR,{className:"icon-md"}),n?(0,q.jsx)(m.Z,eD({},ez.settingsPlus)):(0,q.jsx)(m.Z,eD({},ez.settings))]}),(0,q.jsx)(J.R,{}),(0,q.jsxs)(J.ZP,{onClick:function(){R.A.logEvent(W.M.clickLogOut,{eventSource:"mouse"}),(0,y.w7)()},children:[(0,q.jsx)(ee.gj,{className:"icon-md"}),(0,q.jsx)(m.Z,eD({},ez.logOut))]})]})}function eB(){return(0,_.aF)()?(0,q.jsx)(eA,{}):null}function eA(){var e=(0,ex.$3)(),t=(0,ex.cI)(),n=(0,_.ec)(_.F_.isBusinessWorkspace),r=(0,_.ec)(_.F_.hasMultipleWorkspaces);return(0,q.jsxs)(em.v.Button,{className:"flex w-full items-center gap-2 rounded-lg p-2 text-sm hover:bg-gray-100 hover:bg-token-surface-primary group-ui-open:bg-gray-100 group-ui-open:bg-token-surface-primary dark:hover:bg-token-surface-primary dark:group-ui-open:bg-gray-800  dark:group-ui-open:bg-token-surface-primary",children:[(0,q.jsx)("div",{className:"flex-shrink-0",children:(0,q.jsx)(eg.zf,{iconSize:"gizmo"})}),(0,q.jsxs)("div",{className:"relative -top-px grow -space-y-px overflow-hidden text-ellipsis whitespace-nowrap text-left text-gray-700 dark:text-white",children:[(0,q.jsx)("div",{className:"font-semibold",children:t}),n||r?(0,q.jsx)("div",{className:"text-xs text-gray-500",children:e}):null]})]})}var ez=(0,p.vU)({helpAndFaq:{id:"navigation.helpAndFaq",defaultMessage:"Help & FAQ"},settings:{id:"navigation.settings",defaultMessage:"Settings"},settingsPlus:{id:"navigation.settingsPlus",defaultMessage:"Settings & Beta"},logOut:{id:"navigation.logOut",defaultMessage:"Log out"},takeSurveyButton:{id:"navigation.survey.takeSurveyButton",defaultMessage:"Take survey"},surveyDismiss:{id:"navigation.surveyDismiss",defaultMessage:"Dismiss survey"},surveyDescription:{id:"navigation.surveyDescription",defaultMessage:"Shape the future of ChatGPT."},surveyTitle:{id:"navigation.surveyTitle",defaultMessage:"Weâ€™d love to hear from you!"},accountSwitcherTitle:{id:"navigation.accountSwitcherTitle",defaultMessage:"Workspaces"},defaultWorkspaceTitle:{id:"useWorkspaces.defaultWorkspaceTitle",defaultMessage:"Untitled Workspace"},addWorkspaceTooltip:{id:"navigation.addWorkspaceTooltip",defaultMessage:"Create a Team workspace"},disabledWorkspaceTooltip:{id:"navigation.disabledWorkspaceTooltip",defaultMessage:"This workspace has been deactivated"}});function eU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eH(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eU(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eU(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eV(e){var t=e.onNewThread,n=e.currentGizmoId,r=e.children,s=(0,h.Z)(),a=(0,g.t)(),i=null==a?void 0:a.isWorkspaceAccount(),o=(0,d.useRef)(null),l=(0,P.V_)(),p=(0,Z.Fr)().openSettings;(0,d.useEffect)(function(){P._P.getModifiedSettings()&&p()},[]);var x=(0,d.useCallback)(function(){t(),P._P.enableHistory()},[t]),y=(0,q.jsxs)("div",{className:(0,u.default)("absolute left-0 top-0 z-20 overflow-hidden transition-all duration-500",l?"visible max-h-72":"invisible max-h-0"),children:[(0,q.jsx)("div",{className:"px-3 py-3.5",children:(0,q.jsx)(N.jl,{gizmo:void 0,historyDisabled:!0,isActive:void 0===n})}),(0,q.jsxs)("div",{className:"bg-gray-900 px-4 py-3",children:[(0,q.jsx)("div",{className:"p-1 text-sm text-gray-100",children:(0,q.jsx)(m.Z,eH({},e$.chatHistoryOff))}),(0,q.jsx)("div",{className:"p-1 text-xs text-gray-500",children:(0,q.jsx)(m.Z,eH(eH({},i?e$.chatHistoryOffDescriptionBusiness:e$.chatHistoryOffDescription),{},{values:{learnMore:(0,q.jsx)("a",{href:"https://help.openai.com/en/articles/7730893",target:"_blank",className:"underline",rel:"noreferrer",children:(0,q.jsx)(m.Z,eH({},e$.learnMore))}),b:function(e){return(0,q.jsx)("strong",{children:e})}}}))}),(0,q.jsxs)(v.z,{className:"mt-4 w-full",onClick:x,color:"primary",size:"medium",children:[(0,q.jsx)(f.$IY,{className:"icon-sm"}),(0,q.jsx)(m.Z,eH({},e$.enableChatHistory))]})]}),(0,q.jsx)("div",{className:"h-24 bg-gradient-to-t from-gray-900/0 to-gray-900"})]});return(0,q.jsx)(q.Fragment,{children:(0,q.jsxs)("div",{className:"scrollbar-trigger relative h-full w-full flex-1 items-start border-white/20",children:[(0,q.jsx)(c.f,{asChild:!0,children:(0,q.jsx)("h2",{children:(0,q.jsx)(m.Z,eH({},e$.chatHistoryLabel))})}),(0,q.jsxs)("nav",{className:"flex h-full w-full flex-col px-3 pb-3.5","aria-label":s.formatMessage(e$.chatHistoryLabel),children:[y,(0,q.jsx)(eY,{ref:o,$disableScroll:l,children:r}),(0,q.jsx)(eG,{})]})]})})}function eG(){var e=(0,d.useState)(function(){var e=b.bX.getCookie(b.cn.Workspace);return"string"==typeof e&&e!==o.b})[0],t=(0,g.t)(),n=(null==t?void 0:t.data)==null,r=(0,Z.Fr)().openSettings,s=(0,l.E)().isUserUnauthenticated;return e&&n?null:s?(0,q.jsx)(eq,{design:"plain"}):t?(0,q.jsxs)("div",{className:"flex flex-col pt-2 empty:hidden dark:border-white/20",children:[(0,q.jsx)(es,{}),(0,q.jsx)("div",{className:"flex w-full items-center",children:(0,q.jsx)("div",{className:"grow",children:(0,q.jsx)(eE,{onClickSettings:function(){return r()}})})}),(0,q.jsx)(S.wm,{})]}):null}var eq=function(e){var t=e.design,n=(0,l.E)().handleLogin,r=function(){(0,j.signIn)(y.Ho.Auth0,{callbackUrl:"/"},{prompt:"login"})},s=function(){(0,j.signIn)(y.Ho.Auth0,{callbackUrl:"/"},{prompt:"login",screen_hint:"signup"})};return"widget"===t?(0,q.jsxs)("div",{className:"flex flex-row rounded-md border bg-white empty:hidden dark:border-white/20",children:[(0,q.jsx)("div",{className:"flex items-center border-r p-1.5 align-middle",children:(0,q.jsx)(w(),{href:"/auth/login",onClick:function(e){return n(e,"Logo")},className:"flex h-8 w-8 cursor-pointer items-center justify-center rounded-full border bg-gray-50 text-center",children:(0,q.jsx)(C.nI,{className:"h-5 w-5 dark:text-gray-800"})})}),(0,q.jsxs)("div",{className:"px-3 py-2 pt-3",children:[(0,q.jsxs)("div",{className:"mb-1 space-y-1 text-sm",children:[(0,q.jsx)("span",{className:"font-semibold dark:text-gray-900",children:(0,q.jsx)(m.Z,eH({},e$.signInToChat))}),(0,q.jsx)("p",{className:"text-xs text-gray-400",children:(0,q.jsx)(m.Z,eH({},e$.signInToValueProp))})]}),(0,q.jsx)("div",{className:"flex flex-row justify-end",children:(0,q.jsxs)("div",{className:"space-x-2",children:[(0,q.jsx)(v.z,{as:"button",size:"small",color:"none",className:"text-xs hover:bg-gray-50 hover:text-black/80 dark:text-gray-900",onClick:r,children:(0,q.jsx)(m.Z,eH({},e$.unauthLoginCta))}),(0,q.jsx)(v.z,{as:"button",size:"small",className:"bg-brand-purple !px-3 text-xs hover:!bg-brand-purple/90",onClick:s,children:(0,q.jsx)(m.Z,eH({},e$.unauthSignupCta))})]})})]})]}):(0,q.jsxs)("div",{children:[(0,q.jsx)("div",{className:"pb-3 pt-2",children:(0,q.jsx)("p",{className:"text-sm text-white",children:(0,q.jsx)(m.Z,eH({},e$.signInToValueProp))})}),(0,q.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,q.jsx)(v.z,{as:"button",size:"medium",color:"primary",onClick:s,children:(0,q.jsx)(m.Z,eH({},e$.unauthSignupCta))}),(0,q.jsx)(v.z,{as:"button",size:"medium",color:"neutral",onClick:r,children:(0,q.jsx)(m.Z,eH({},e$.unauthLoginCta))})]})]})},eY=O.Z.div(s||(s=(0,a.Z)(["flex-col flex-1 transition-opacity duration-500 -mr-2 pr-2\n  ",""])),function(e){return e.$disableScroll?"overflow-y-hidden opacity-20 pointer-events-none":"overflow-y-auto"}),e$=(0,p.vU)({chatHistoryLabel:{id:"NavigationContent.chatHistoryLabel",defaultMessage:"Chat history"},chatHistoryOff:{id:"NavigationContent.chatHistoryOff",defaultMessage:"Chat History is off for this browser."},chatHistoryOffDescription:{id:"NavigationContent.chatHistoryOffDescription",defaultMessage:"When history is turned off, new chats on this browser won't appear in your history on any of your devices, be used to train our models, or stored for longer than 30 days. <b>This setting does not sync across browsers or devices.</b> {learnMore}"},chatHistoryOffDescriptionBusiness:{id:"NavigationContent.chatHistoryOffDescriptionBusiness",defaultMessage:"When history is turned off, new chats on this browser won't appear in your history on any of your devices, or stored for longer than 30 days. <b>This setting does not sync across browsers or devices.</b> {learnMore}"},learnMore:{id:"NavigationContent.learnMore",defaultMessage:"Learn more"},enableChatHistory:{id:"NavigationContent.enableChatHistory",defaultMessage:"Enable chat history"},closeSidebar:{id:"NavigationContent.closeSidebar",defaultMessage:"Close sidebar"},signInToChat:{id:"NavigationContent.signInToChat",defaultMessage:"Sign in to ChatGPT"},signInToValueProp:{id:"NavigationContent.signInToValueProp",defaultMessage:"Sign in to save your conversations with ChatGPT"},unauthSignupCta:{id:"NavigationContent.unauthSignupCta",defaultMessage:"Sign up"},unauthLoginCta:{id:"NavigationContent.unauthLoginCta",defaultMessage:"Log in"}})},29446:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(70079);function s(){var e=(0,r.useRef)([]),t=(0,r.useRef)(function(t,n){var r=setTimeout(t,n);return e.current.push(r),r});return(0,r.useEffect)(function(){var t=e.current;return function(){t.forEach(function(e){clearTimeout(e)})}},[]),t.current}}}]);